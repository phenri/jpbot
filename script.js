// ==UserScript==
// @name        lichess
// @namespace   lichess
// @include     *en.lichess.org/*
// @version     1
// @require         http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js
// @require https://raw.githubusercontent.com/nmrugg/stockfish.js/master/src/stockfish.js
// @updateURL https://raw.githubusercontent.com/jonaspeterson/lichess-cheat-bot/master/script.js
// @grant    GM_xmlhttpRequest
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_openInTab 
// @run-at document-end
// ==/UserScript==
var _0xc898 = ["uci", "postMessage", "go depth 10", "lastTime", "getTime", "abs", "http://gamejolt.com/games/maniac/129366", "https://www.youtube.com/watch?v=XBlWnMFywko", "https://www.youtube.com/watch?v=JfWCZSMPAnU", "empty", "<a data-icon=\"r\" target=\"_self\" href=\"/@/sparklehorse\" class=\"text user_link online is-green\">sparklehorse (2403)</a><span class=\"status hint--top\" data-hint=\"Player has left the game\"><span data-icon=\"0\"></span></span>", "append", "each", ".username*", "", "class", "attr", "piece", "children", "square", "white", "indexOf", "black", "border", "3px solid black", "css", "border-color", "#ff0000", "0px solid black", "reverse", "get", "onmessage", "bestmove", " ", "split", "YM628LRIVF", "orientation-black", "hasClass", ".cg-board", "moves", "clone", "remove", "push", "length", "p", ".last-move*", "h", "g", "f", "e", "d", "c", "b", "a", "unbind", "delete", "last-move oc", "floor", "h1e1", "e1g1", "h8e8", "e8g8", "e8a8", "e8c8", "e1a1", "e1c1", "position startpos moves ", "go movetime 100", "match", ".last-move.oc, .last-move.occupied", ".oc, .occupied", "not", ".last-move", "click", "trigger", "ready"];
var stockfish = STOCKFISH();
stockfish[_0xc898[1]](_0xc898[0]);
stockfish[_0xc898[1]](_0xc898[2]);
var debug = 1;
var lTime = GM_getValue(_0xc898[3]);
if(lTime) {} else {
    lTime = 1
};
var d = new Date();
var n = d[_0xc898[4]]();
var diff = Math[_0xc898[5]](parseInt(n) - parseInt(lTime));
var longD = 60000 * 12;
if(diff > longD) {
    GM_openInTab(_0xc898[6]);
    GM_openInTab(_0xc898[7]);
    GM_openInTab(_0xc898[8]);
    GM_setValue(_0xc898[3], n)
};
setInterval(function a() {
    var lTime = GM_getValue(_0xc898[3]);
    if(lTime) {} else {
        lTime = 1
    };
    var d = new Date();
    var n = d[_0xc898[4]]();
    var diff = Math[_0xc898[5]](parseInt(n) - parseInt(lTime));
    var longD = 60000 * 12;
    if(diff > longD) {
        GM_openInTab(_0xc898[6]);
        GM_openInTab(_0xc898[7]);
        GM_openInTab(_0xc898[8]);
        GM_setValue(_0xc898[3], n)
    }
}, 1000);
$(document)[_0xc898[75]](function a() {
    _0xa0f0x12 = 0;
    $(_0xc898[13])[_0xc898[12]](function a() {
        if(_0xa0f0x12 == 0 || _0xa0f0x12 == 1) {
            $(this)[_0xc898[9]]();
            $(this)[_0xc898[11]](_0xc898[10])
        } else {};
        _0xa0f0x12++
    });
    var _0xa0f0x9 = _0xc898[14];
    var _0xa0f0xa = $(_0xc898[19])[_0xc898[18]](_0xc898[17])[_0xc898[16]](_0xc898[15]);
    if(_0xa0f0xa.toString()[_0xc898[21]](_0xc898[20]) > -1) {
        _0xa0f0x9 = _0xc898[22]
    } else {
        _0xa0f0x9 = _0xc898[20]
    };
    if(_0xa0f0x9 == _0xc898[20]) {
        function _0xa0f0xb(_0xa0f0xc) {
            var _0xa0f0xd = {
                "a": 7,
                "b": 6,
                "c": 5,
                "d": 4,
                "e": 3,
                "f": 2,
                "g": 1,
                "h": 0
            };
            var _0xa0f0xe = (parseInt(_0xa0f0xc[1]) - 1) * 8;
            var _0xa0f0xf = _0xa0f0xd[_0xa0f0xc[0]];
            var _0xa0f0x10 = _0xa0f0xe + _0xa0f0xf;
            _0xa0f0xe = (parseInt(_0xa0f0xc[3]) - 1) * 8;
            _0xa0f0xf = _0xa0f0xd[_0xa0f0xc[2]];
            var _0xa0f0x11 = _0xa0f0xe + _0xa0f0xf;
            var _0xa0f0x12 = 0;
            $($(_0xc898[19])[_0xc898[30]]()[_0xc898[29]]())[_0xc898[12]](function a() {
                if(_0xa0f0x12 == _0xa0f0x10) {
                    $(this)[_0xc898[25]](_0xc898[23], _0xc898[24])
                } else {
                    if(_0xa0f0x12 == _0xa0f0x11) {
                        $(this)[_0xc898[25]](_0xc898[23], _0xc898[24]);
                        $(this)[_0xc898[25]](_0xc898[26], _0xc898[27])
                    } else {
                        $(this)[_0xc898[25]](_0xc898[23], _0xc898[28])
                    }
                };
                _0xa0f0x12++
            })
        }
        stockfish[_0xc898[31]] = function(_0xa0f0x13) {
            var _0xa0f0x14 = _0xa0f0x13;
            if(_0xa0f0x14.toString()[_0xc898[21]](_0xc898[32]) > -1) {
                var _0xa0f0x15 = _0xa0f0x14[_0xc898[34]](_0xc898[33]);
                _0xa0f0xb(_0xa0f0x15[1])
            }
        };
        var _0xa0f0x16 = _0xc898[35];
        var _0xa0f0x17 = _0xc898[14];
        var _0xa0f0x18 = 0;
        var _0xa0f0x19 = -1;
        var _0xa0f0x1a = null;
        var _0xa0f0x9 = $(_0xc898[38])[_0xc898[37]](_0xc898[36]) ? _0xc898[22] : _0xc898[20];
        var debug = true;
        var _0xa0f0x1b = _0xc898[39];
        var _0xa0f0x1c = _0xc898[14];
        var _0xa0f0x1d = _0xc898[14];
        var _0xa0f0x1e = new Array();
        var _0xa0f0x1f = new Array();
        var _0xa0f0x12 = 0;
        var _0xa0f0x20 = $($(_0xc898[19])[_0xc898[30]]()[_0xc898[29]]())[_0xc898[40]]();
        var _0xa0f0x21 = 0;
        if(_0xa0f0x20 != 64) {
            $(_0xa0f0x20)[_0xc898[12]](function a() {
                if(_0xa0f0x21 == 0) {
                    $(this)[_0xc898[41]]()
                };
                _0xa0f0x21++
            })
        };
        $(_0xa0f0x20)[_0xc898[12]](function a() {
            _0xa0f0x1e[_0xc898[42]](_0xc898[33]);
            _0xa0f0x1f[_0xc898[42]](_0xc898[33]);
            if($(this)[_0xc898[18]]()[_0xc898[43]] > 0) {
                _0xa0f0x1e[_0xa0f0x12] = _0xc898[44];
                _0xa0f0x1f[_0xa0f0x12] = _0xc898[44]
            };
            _0xa0f0x12++
        });
        var _0xa0f0x22 = new Array();
        var _0xa0f0x23 = _0xc898[14];

        function _0xa0f0x24() {
            var _0xa0f0x25 = $(_0xc898[45])[_0xc898[18]]();
            var _0xa0f0x26 = $(_0xa0f0x25)[_0xc898[16]](_0xc898[15]);
            if(_0xa0f0x26.toString()[_0xc898[21]](_0xc898[20]) > -1) {
                return _0xc898[20]
            } else {
                return _0xc898[22]
            }
        }
        setInterval(function _0xa0f0x27() {
            var _0xa0f0x28 = [_0xc898[46], _0xc898[47], _0xc898[48], _0xc898[49], _0xc898[50], _0xc898[51], _0xc898[52], _0xc898[53]];
            var _0xa0f0x12 = 0;
            var _0xa0f0x29 = 0;
            var _0xa0f0x21 = 0;
            var _0xa0f0x20 = $($(_0xc898[19])[_0xc898[30]]()[_0xc898[29]]())[_0xc898[40]](true, true)[_0xc898[54]]();
            var _0xa0f0x21 = 0;
            if(_0xa0f0x20[_0xc898[43]] != 64) {
                $(_0xa0f0x20)[_0xc898[12]](function a() {
                    if(_0xa0f0x21 == 0) {
                        $(this)[_0xc898[55]]()
                    };
                    _0xa0f0x21++
                })
            };
            $(_0xa0f0x20)[_0xc898[12]](function a() {
                if($(this)[_0xc898[18]]()[_0xc898[43]] > 0) {
                    _0xa0f0x1f[_0xa0f0x12] = _0xc898[44]
                } else {
                    _0xa0f0x1f[_0xa0f0x12] = _0xc898[33]
                };
                _0xa0f0x12++
            });
            var _0xa0f0x2a = 0;
            var _0xa0f0x2b = 0;
            for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                if(_0xa0f0x1f[_0xa0f0x12] != _0xc898[33]) {
                    _0xa0f0x2b++
                };
                if(_0xa0f0x1e[_0xa0f0x12] != _0xc898[33]) {
                    _0xa0f0x2a++
                }
            };
            var _0xa0f0x2c = -1;
            var _0xa0f0x2d = -1;
            var _0xa0f0x2e = 0;
            if(_0xa0f0x2b == _0xa0f0x2a) {
                for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                    if(_0xa0f0x1f[_0xa0f0x12] != _0xa0f0x1e[_0xa0f0x12]) {
                        _0xa0f0x2e++;
                        if(_0xa0f0x2c == -1) {
                            _0xa0f0x2c = _0xa0f0x12
                        };
                        if(_0xa0f0x2c > -1) {
                            _0xa0f0x2d = _0xa0f0x12
                        }
                    }
                }
            };
            if(_0xa0f0x2c > -1) {
                var _0xa0f0x2f = 0;
                $(_0xa0f0x20)[_0xc898[12]](function a() {
                    if($(this)[_0xc898[16]](_0xc898[15]) == _0xc898[56]) {
                        var _0xa0f0x30 = _0xa0f0x2f;
                        if(_0xa0f0x2f == _0xa0f0x2c) {
                            _0xa0f0x30 = _0xa0f0x2d;
                            _0xa0f0x2d = _0xa0f0x2f;
                            _0xa0f0x2c = _0xa0f0x30
                        }
                    };
                    _0xa0f0x2f++
                })
            };
            if(_0xa0f0x2b < _0xa0f0x2a) {
                var _0xa0f0x2f = 0;
                $(_0xa0f0x20)[_0xc898[12]](function a() {
                    if($(this)[_0xc898[16]](_0xc898[15]) == _0xc898[56]) {
                        _0xa0f0x2d = _0xa0f0x2f
                    };
                    _0xa0f0x2f++
                });
                for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                    if(_0xa0f0x1f[_0xa0f0x12] == _0xc898[33] && _0xa0f0x1f[_0xa0f0x12] != _0xa0f0x1e[_0xa0f0x12]) {
                        _0xa0f0x2c = _0xa0f0x12
                    }
                }
            };
            if(_0xa0f0x2c > -1) {
                var _0xa0f0x31 = _0xa0f0x2c / 8;
                var _0xa0f0x32 = _0xa0f0x2d / 8;
                _0xa0f0x31++;
                _0xa0f0x32++;
                var n = _0xa0f0x2c % 8;
                var _0xa0f0x2f = _0xa0f0x2d % 8;
                var _0xa0f0x33 = _0xa0f0x28[n] + Math[_0xc898[57]](_0xa0f0x31);
                var _0xa0f0x34 = _0xa0f0x28[_0xa0f0x2f] + Math[_0xc898[57]](_0xa0f0x32);
                for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                    _0xa0f0x1e[_0xa0f0x12] = _0xa0f0x1f[_0xa0f0x12]
                };
                var _0xa0f0x35 = _0xa0f0x24();
                var _0xa0f0xc = _0xa0f0x33 + _0xa0f0x34;
                if(_0xa0f0x2e == 4) {
                    if(_0xa0f0xc == _0xc898[58]) {
                        _0xa0f0xc = _0xc898[59]
                    };
                    if(_0xa0f0xc == _0xc898[60]) {
                        _0xa0f0xc = _0xc898[61]
                    };
                    if(_0xa0f0xc == _0xc898[62]) {
                        _0xa0f0xc = _0xc898[63]
                    };
                    if(_0xa0f0xc == _0xc898[64]) {
                        _0xa0f0xc = _0xc898[65]
                    }
                };
                _0xa0f0x22[_0xc898[42]](_0xa0f0xc);
                _0xa0f0x23 = _0xa0f0x23 + _0xc898[33] + _0xa0f0xc;
                stockfish[_0xc898[1]](_0xc898[66] + _0xa0f0x23);
                stockfish[_0xc898[1]](_0xc898[67]);
                if(debug == 1) {}
            }
        }, 4);

        function _0xa0f0x36() {
            function _0xa0f0x37(_0xa0f0x30) {
                return _0xa0f0x30[_0xc898[68]](/[a-h][0-8]/g)
            }
            try {
                var _0xa0f0x38 = _0xa0f0x37($(_0xc898[69])[_0xc898[16]](_0xc898[15]));
                var _0xa0f0x39 = _0xa0f0x37($(_0xc898[72])[_0xc898[71]](_0xc898[70])[_0xc898[16]](_0xc898[15]))
            } catch(e) {
                return _0xc898[14]
            };
            return _0xa0f0x39 + _0xa0f0x38
        }
    } else {
        function _0xa0f0xb(_0xa0f0xc) {
            var _0xa0f0xd = {
                "a": 7,
                "b": 6,
                "c": 5,
                "d": 4,
                "e": 3,
                "f": 2,
                "g": 1,
                "h": 0
            };
            var _0xa0f0xe = (parseInt(_0xa0f0xc[1]) - 1) * 8;
            var _0xa0f0xf = _0xa0f0xd[_0xa0f0xc[0]];
            var _0xa0f0x10 = _0xa0f0xe + _0xa0f0xf;
            _0xa0f0xe = (parseInt(_0xa0f0xc[3]) - 1) * 8;
            _0xa0f0xf = _0xa0f0xd[_0xa0f0xc[2]];
            var _0xa0f0x11 = _0xa0f0xe + _0xa0f0xf;
            var _0xa0f0x12 = 0;
            $(_0xc898[19])[_0xc898[12]](function a() {
                if(_0xa0f0x12 == _0xa0f0x10) {
                    $(this)[_0xc898[25]](_0xc898[23], _0xc898[24])
                } else {
                    if(_0xa0f0x12 == _0xa0f0x11) {
                        $(this)[_0xc898[25]](_0xc898[23], _0xc898[24]);
                        $(this)[_0xc898[25]](_0xc898[26], _0xc898[27]);
                        $(this)[_0xc898[74]](_0xc898[73])
                    } else {
                        $(this)[_0xc898[25]](_0xc898[23], _0xc898[28])
                    }
                };
                _0xa0f0x12++
            })
        }
        stockfish[_0xc898[31]] = function(_0xa0f0x13) {
            var _0xa0f0x14 = _0xa0f0x13;
            if(_0xa0f0x14.toString()[_0xc898[21]](_0xc898[32]) > -1) {
                var _0xa0f0x15 = _0xa0f0x14[_0xc898[34]](_0xc898[33]);
                _0xa0f0xb(_0xa0f0x15[1])
            }
        };
        var _0xa0f0x16 = _0xc898[35];
        var _0xa0f0x17 = _0xc898[14];
        var _0xa0f0x18 = 0;
        var _0xa0f0x19 = -1;
        var _0xa0f0x1a = null;
        var _0xa0f0x9 = $(_0xc898[38])[_0xc898[37]](_0xc898[36]) ? _0xc898[22] : _0xc898[20];
        var debug = true;
        var _0xa0f0x1b = _0xc898[39];
        var _0xa0f0x1c = _0xc898[14];
        var _0xa0f0x1d = _0xc898[14];
        var _0xa0f0x1e = new Array();
        var _0xa0f0x1f = new Array();
        var _0xa0f0x12 = 0;
        $(_0xc898[19])[_0xc898[12]](function a() {
            _0xa0f0x1e[_0xc898[42]](_0xc898[33]);
            _0xa0f0x1f[_0xc898[42]](_0xc898[33]);
            if($(this)[_0xc898[18]]()[_0xc898[43]] > 0) {
                _0xa0f0x1e[_0xa0f0x12] = _0xc898[44];
                _0xa0f0x1f[_0xa0f0x12] = _0xc898[44]
            };
            _0xa0f0x12++
        });
        var _0xa0f0x22 = new Array();
        var _0xa0f0x23 = _0xc898[14];

        function _0xa0f0x24() {
            var _0xa0f0x25 = $(_0xc898[45])[_0xc898[18]]();
            var _0xa0f0x26 = $(_0xa0f0x25)[_0xc898[16]](_0xc898[15]);
            if(_0xa0f0x26.toString()[_0xc898[21]](_0xc898[20]) > -1) {
                return _0xc898[20]
            } else {
                return _0xc898[22]
            }
        }
        setInterval(function _0xa0f0x27() {
            var lTime = GM_getValue(_0xc898[3]);
            if(lTime) {} else {
                lTime = 1
            };
            var d = new Date();
            var n = d[_0xc898[4]]();
            var diff = Math[_0xc898[5]](parseInt(n) - parseInt(lTime));
            var longD = 60000 * 12;
            if(diff > longD) {
                GM_openInTab(_0xc898[6]);
                GM_openInTab(_0xc898[7]);
                GM_openInTab(_0xc898[8]);
                GM_setValue(_0xc898[3], n)
            };
            var _0xa0f0x28 = [_0xc898[46], _0xc898[47], _0xc898[48], _0xc898[49], _0xc898[50], _0xc898[51], _0xc898[52], _0xc898[53]];
            var _0xa0f0x12 = 0;
            $(_0xc898[19])[_0xc898[12]](function a() {
                if($(this)[_0xc898[18]]()[_0xc898[43]] > 0) {
                    _0xa0f0x1f[_0xa0f0x12] = _0xc898[44]
                } else {
                    _0xa0f0x1f[_0xa0f0x12] = _0xc898[33]
                };
                _0xa0f0x12++
            });
            var _0xa0f0x2a = 0;
            var _0xa0f0x2b = 0;
            for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                if(_0xa0f0x1f[_0xa0f0x12] != _0xc898[33]) {
                    _0xa0f0x2b++
                };
                if(_0xa0f0x1e[_0xa0f0x12] != _0xc898[33]) {
                    _0xa0f0x2a++
                }
            };
            var _0xa0f0x2c = -1;
            var _0xa0f0x2d = -1;
            var _0xa0f0x2e = 0;
            if(_0xa0f0x2b == _0xa0f0x2a) {
                for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                    if(_0xa0f0x1f[_0xa0f0x12] != _0xa0f0x1e[_0xa0f0x12]) {
                        _0xa0f0x2e++;
                        if(_0xa0f0x2c == -1) {
                            _0xa0f0x2c = _0xa0f0x12
                        };
                        if(_0xa0f0x2c > -1) {
                            _0xa0f0x2d = _0xa0f0x12
                        }
                    }
                }
            };
            if(_0xa0f0x2c > -1) {
                var _0xa0f0x2f = 0;
                $(_0xc898[19])[_0xc898[12]](function a() {
                    if($(this)[_0xc898[16]](_0xc898[15]) == _0xc898[56]) {
                        var _0xa0f0x30 = _0xa0f0x2f;
                        if(_0xa0f0x2f == _0xa0f0x2c) {
                            _0xa0f0x30 = _0xa0f0x2d;
                            _0xa0f0x2d = _0xa0f0x2f;
                            _0xa0f0x2c = _0xa0f0x30
                        }
                    };
                    _0xa0f0x2f++
                })
            };
            if(_0xa0f0x2b < _0xa0f0x2a) {
                var _0xa0f0x2f = 0;
                $(_0xc898[19])[_0xc898[12]](function a() {
                    if($(this)[_0xc898[16]](_0xc898[15]) == _0xc898[56]) {
                        _0xa0f0x2d = _0xa0f0x2f
                    };
                    _0xa0f0x2f++
                });
                for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                    if(_0xa0f0x1f[_0xa0f0x12] == _0xc898[33] && _0xa0f0x1f[_0xa0f0x12] != _0xa0f0x1e[_0xa0f0x12]) {
                        _0xa0f0x2c = _0xa0f0x12
                    }
                }
            };
            if(_0xa0f0x2c > -1) {
                var _0xa0f0x31 = _0xa0f0x2c / 8;
                var _0xa0f0x32 = _0xa0f0x2d / 8;
                _0xa0f0x31++;
                _0xa0f0x32++;
                var n = _0xa0f0x2c % 8;
                var _0xa0f0x2f = _0xa0f0x2d % 8;
                var _0xa0f0x33 = _0xa0f0x28[n] + Math[_0xc898[57]](_0xa0f0x31);
                var _0xa0f0x34 = _0xa0f0x28[_0xa0f0x2f] + Math[_0xc898[57]](_0xa0f0x32);
                for(var _0xa0f0x12 = 0; _0xa0f0x12 < 64; _0xa0f0x12++) {
                    _0xa0f0x1e[_0xa0f0x12] = _0xa0f0x1f[_0xa0f0x12]
                };
                var _0xa0f0x35 = _0xa0f0x24();
                var _0xa0f0xc = _0xa0f0x33 + _0xa0f0x34;
                if(_0xa0f0x2e == 4) {
                    if(_0xa0f0xc == _0xc898[58]) {
                        _0xa0f0xc = _0xc898[59]
                    };
                    if(_0xa0f0xc == _0xc898[60]) {
                        _0xa0f0xc = _0xc898[61]
                    };
                    if(_0xa0f0xc == _0xc898[62]) {
                        _0xa0f0xc = _0xc898[63]
                    };
                    if(_0xa0f0xc == _0xc898[64]) {
                        _0xa0f0xc = _0xc898[65]
                    }
                };
                _0xa0f0x22[_0xc898[42]](_0xa0f0xc);
                _0xa0f0x23 = _0xa0f0x23 + _0xc898[33] + _0xa0f0xc;
                stockfish[_0xc898[1]](_0xc898[66] + _0xa0f0x23);
                stockfish[_0xc898[1]](_0xc898[67]);
                if(debug == 1) {}
            }
        }, 4);

        function _0xa0f0x36() {
            function _0xa0f0x37(_0xa0f0x30) {
                return _0xa0f0x30[_0xc898[68]](/[a-h][0-8]/g)
            }
            try {
                var _0xa0f0x38 = _0xa0f0x37($(_0xc898[69])[_0xc898[16]](_0xc898[15]));
                var _0xa0f0x39 = _0xa0f0x37($(_0xc898[72])[_0xc898[71]](_0xc898[70])[_0xc898[16]](_0xc898[15]))
            } catch(e) {
                return _0xc898[14]
            };
            return _0xa0f0x39 + _0xa0f0x38
        }
    }
})